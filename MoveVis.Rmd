---
title: "Plot 1"
date: "27/11/2021"
output: html_document
---

```{r}
library(tidyverse)
library(ggthemes)
library(ggmap)
library(move)
library(moveVis)
library(directlabels)


CatDatAus <- move("PetCatsAus.csv")  #Import Cat Data

RefAus <- read.csv("Pet Cats Australia-reference-data.csv")


CatDFAus =  as.data.frame(CatDatAus)   

friends <- (CatDFAus
          %>% filter(trackId %in% c("Molly", "Max2"))
          
)

friends_ref <- (RefAus
          %>% filter(animal.id %in% c("Molly", "Max2"))
          
)
#make data frame a move object
friends_move <- move(friends)

#'align' to the same time scale (4 min)
friends_move <- align_move(friends_move, res=15, unit="mins")

#make frames
friends_frames <- (frames_spatial(friends_move,
                                   map_service="osm",
                                  #how do I make mapbox portable?
                                  #    map_service="mapbox",
                                  #    map_type="satellite",
                                  # map_token="pk.eyJ1IjoiZnJlZW1qYyIsImEiOiJja3d0dXZrZXkxa2d4Mm9ueWJ0MWp2cmowIn0.wJ4PSir_36Bc0dbKU2JZ0g",
                                  # map_dir="C:/Users/Jen/Stat744_project/CatMovement/mapbox/",
                                     trace_show = T, 
                                     tail_length=1000,
                                     #trace_colour = c("#D95F02","#7570B3"), 
                                     #tail_colour= "white",
                                     equidistant = F,
                                     path_fade=TRUE,
                                     path_size = 2.5,
                                     path_colours = c("#D95F02","#7570B3"))
                      %>% add_scalebar(colour = "white", height=0.03, position="bottomright", label_margin=1)
                      %>% add_timestamps(friends_move, type = "label", size=5)
                      %>% add_progress(size=8)
                      #remove lat and long
                      %>% add_gg(gg = expr(theme(axis.title.x=element_blank(),
                                                 axis.text.x=element_blank(),
                                                 axis.ticks.x=element_blank(),
                                                 axis.title.y=element_blank(),
                                                 axis.text.y=element_blank(),
                                                 axis.ticks.y=element_blank())))
)

#make gif
(animate_frames(friends_frames, out_file = "Molly_Max2.gif", overwrite=T, end_pause=20) 

)


```



## Data Viz Choices

* no Lat, Long labels
* keep entire path
* timestamp
* choice of time resolution


## Questions

1. Time points - sometimes fast and sometimes slow due to gaps in time (i.e. sleeping time), I don't understand the resolution. I think this is set to 4 minute increments.
3. Want the full path to be the same colour for each individual with a gradient, don't know if this is doable.
4. Colours okay?


