---
title: "Plot 1"
date: "27/11/2021"
output: html_document
---

```{r}
library(tidyverse)
library(ggthemes)
library(ggmap)
library(move)
library(moveVis)
library(directlabels)


CatDatAus = move("PetCatsAus.csv")  #Import Cat Data
# CatDatNZ = move("PetCatsNZ.csv")  #Import Cat Data
# CatDatUK = move("PetCatsUK.csv")  #Import Cat Data
# CatDatUS = move("PetCatsUS.csv")  #Import Cat Data

CatRefAus <- read.csv("Pet Cats Australia-reference-data.csv")
# CatRefUK <- read.csv("Pet Cats United Kingdom-reference-data.csv")

CatDFAus =  as.data.frame(CatDatAus)   
# CatDFUK =  as.data.frame(CatDatUK)   
# CatDFUS =  as.data.frame(CatDatUS)
# CatDFNZ =  as.data.frame(CatDatNZ)

friends <- (CatDFAus
          %>% filter(trackId %in% c("Molly", "Max2"))
          
)

friends_ref <- (CatRefAus
          %>% filter(animal.id %in% c("Molly", "Max2"))
          
)
#make data frame a move object
friends_move <- move(friends)

#'align' to the same time scale (4 min)
friends_move <- align_move(friends_move, res=4, unit="mins")

#make frames
friends_frames <- (frames_spatial(friends_move,
                                     map_service="osm",
                                     #map_type="topographic",
                                     trace_show = T, 
                                     trace_colour = "white", 
                                     equidistant = F,
                                     path_fade=TRUE,
                                     path_colours = c("#1B9E77","#7570B3"))
                      %>% add_northarrow(colour = "black")
                      %>% add_scalebar(colour = "black")
                      %>% add_timestamps(friends_move, type = "label")
                      %>% add_progress()
                      #remove lat and long
                      %>% add_gg(gg = expr(theme(axis.title.x=element_blank(),
                                                 axis.text.x=element_blank(),
                                                 axis.ticks.x=element_blank(),
                                                 axis.title.y=element_blank(),
                                                 axis.text.y=element_blank(),
                                                 axis.ticks.y=element_blank())))
#%>% add_gg(gg=expr(directlabels::geom_dl(data = cats_group_align, aes(label = trackId), method="smart.grid")))
)

#make gif
(animate_frames(friends_frames, out_file = "Molly_Max2.gif", overwrite=T) 

)


```



## Data Viz Choices

* no Lat, Long labels
* keep entire path
* timestamp
* choice of time resolution


## Questions

1. Time points - sometimes fast and sometimes slow due to gaps in time (i.e. sleeping time), I don't understand the resolution. I think this is set to 4 minute increments.
2. Direct labels? seem challenging to add
3. Want the full path to be the same colour for each individual with a gradient, don't know if this is doable.
4. Colours okay?
5. Interactively adjusting speed does not seem to be doable.
6. background layer, does satellite add more?
7. Story we are telling? 

## TO DO

1. progress bar - remove or make larger
